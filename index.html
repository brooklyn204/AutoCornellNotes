<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowmads - Dive Deep into Learning</title>
    <link rel="stylesheet" href="css/homepage.css">
</head>
<body>
    <!-- Website Name Display -->
    <header>
        <h1 class="website-name">Knowmads</h1>
    </header>

    <!-- Introduction and Context Section -->
    <div class="intro-section">
        <h1>Welcome to Knowmads!</h1>
        <div class="centered-content">
            <p>Revise, understand, and excel with your notes.</p>
        </div>
        <video controls>
            <source src="path_to_video.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <h2>How it Works</h2>
        <div class="centered-content">
            <p>1. Enter your notes.<br>2. Receive comprehension questions.<br>3. Test your understanding.</p>
        </div>
        <h2>Purpose</h2>
        <div class="centered-content">
            <p>With Knowmads, deepen your grasp on subjects and ensure you're always ready for any quiz or test.</p>
        </div>
    </div>

    <!-- Notes Input Section -->
    <div class="container">
        <textarea id="notesInput" rows="10" placeholder="Enter your study session notes here..."></textarea>
        <button id="submitBtn" onclick="sendMessage()">Generate Questions</button>
    </div>

    

    <script>
      var requestNum = 0;
        function sendMessage() {
            requestNum += 1;
            const question = "Ask me 5 comprehension questions about the following and output it in the form of a list of the questions:";
            //const answer = "Is this the correct answer to question ";
            var notesInput = ""
            var ans = ""
            if (requestNum % 2 == 1) { // This is a question
              notesInput += question + document.getElementById('notesInput').value;
            } else { // This is an answer (currently must be in the form of "<Question number> <answer>")
              ans += answer + document.getElementById('notesInput').value;
            }

            const apiKey = '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';
            const apiUrl = 'https://api.openai.com/v1/chat/completions';

            const requestData = {
                model: 'gpt-3.5-turbo',
                messages: [
                    { role: 'system', content: '' },
                    { role: 'user', content: notesInput },
                ],
            };

            console.log(JSON.stringify(requestData))

            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestData),
            })
            .then(response => response.json())
            .then(data => {
                let ca = data.choices[0].message.content.split('?'); // Replace with your data\
                localStorage.setItem('myData', ca);
            })
            .catch(error => {
                console.error(error);
            });
        }
    </script>
    //<script src="js/script.js"></script>
</body>
</html>
